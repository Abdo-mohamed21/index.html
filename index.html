<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Dental Point</title>
<style>
  body { font-family: Arial, sans-serif; background: #f9f9f9; margin: 0; padding: 0; direction: rtl; }
  header { background: #0066a2; color: white; padding: 15px; text-align: center; font-size: 1.5em; }
  main { padding: 20px; max-width: 900px; margin: auto; }
  .tabs { display: flex; flex-wrap: wrap; gap: 10px; margin-bottom: 20px; }
  .tab { background: #e3e3e3; padding: 10px 15px; border-radius: 8px; cursor: pointer; }
  .tab.active { background: #0066a2; color: white; }
  .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); gap: 15px; }
  .card { background: white; border-radius: 10px; padding: 15px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
  .card h4 { margin: 0 0 10px; }
  .price { color: #0066a2; font-weight: bold; margin-bottom: 10px; }
  .controls { display: flex; gap: 10px; align-items: center; }
  input[type=number] { width: 60px; padding: 5px; }
  button { background: #0066a2; color: white; border: none; padding: 8px 12px; border-radius: 6px; cursor: pointer; }
  .cart { background: white; padding: 15px; border-radius: 10px; margin-top: 20px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
</style>
</head>
<body>

<header>
  Dental Point - قائمة المواد
</header>

<main>
  <div class="tabs" id="tabs"></div>
  <div class="grid" id="items"></div>
  <div class="cart" id="cart" style="display:none;">
    <h3>سلة الطلب</h3>
    <div id="cartItems"></div>
    <p><strong>الإجمالي:</strong> <span id="total">0</span> جنيه</p>
    <button onclick="sendOrder()">إرسال الطلب</button>
  </div>
</main>

<script>
const data = {
  "2ND": [
    {id: "item1", name: "حزمة مواد - 2ND", price: 1500},
    {id: "item2", name: "قفازات (100 قطعة)", price: 200}
  ],
  "3RD": [
    {id: "item3", name: "Rubber dam kit", price: 120},
    {id: "item4", name: "بور أسنان", price: 25}
  ]
};

let cart = {};
let activeCategory = Object.keys(data)[0];

function renderTabs() {
  const tabs = document.getElementById("tabs");
  tabs.innerHTML = "";
  for (let cat in data) {
    const tab = document.createElement("div");
    tab.className = "tab" + (cat === activeCategory ? " active" : "");
    tab.textContent = cat;
    tab.onclick = () => { activeCategory = cat; renderTabs(); renderItems(); };
    tabs.appendChild(tab);
  }
}

function renderItems() {
  const items = document.getElementById("items");
  items.innerHTML = "";
  data[activeCategory].forEach(item => {
    const card = document.createElement("div");
    card.className = "card";
    card.innerHTML = `
      <h4>${item.name}</h4>
      <div class="price">${item.price} جنيه</div>
      <div class="controls">
        <input type="number" min="1" value="1" id="qty-${item.id}">
        <button onclick="addToCart('${item.id}')">إضافة</button>
      </div>
    `;
    items.appendChild(card);
  });
}

function addToCart(id) {
  const qty = parseInt(document.getElementById(`qty-${id}`).value);
  let item = null;
  for (let cat in data) {
    const found = data[cat].find(i => i.id === id);
    if (found) item = found;
  }
  if (!item) return;
  if (!cart[id]) cart[id] = {item, qty};
  else cart[id].qty += qty;
  renderCart();
}

function renderCart() {
  const cartDiv = document.getElementById("cart");
  const cartItems = document.getElementById("cartItems");
  const totalEl = document.getElementById("total");
  cartItems.innerHTML = "";
  let total = 0;
  for (let id in cart) {
    const {item, qty} = cart[id];
    const div = document.createElement("div");
    div.textContent = `${item.name} × ${qty} = ${item.price * qty} جنيه`;
    cartItems.appendChild(div);
    total += item.price * qty;
  }
  totalEl.textContent = total;
  cartDiv.style.display = "block";
}

function sendOrder() {
  let text = "طلب جديد:%0A";
  let total = 0;
  for (let id in cart) {
    const {item, qty} = cart[id];
    text += `${item.name} × ${qty} = ${item.price * qty} جنيه%0A`;
    total += item.price * qty;
  }
  text += `%0Aالإجمالي: ${total} جنيه`;
  window.location.href = `https://wa.me/201234567890?text=${text}`;
}

renderTabs();
renderItems();
</script>

</body>
</html>
